%!TEX root = ../ss.tex
\opdef{$\GenCast\E{\ep1}{\ep 2}\t$}{\ep1 translates to \ep2 in environment \E with type $\t$}
\begin{mathpar}
\IRule{A1}{\HasType{\E}\x\t}{\GenCast\E\x\x\t}

\IRule{A2}{\GenCast\E{\ep1}{\ep2}{\C} \\ \f:\t \in \C }{\GenCast{\E}{\Get{\ep1}\f}{\Call{\ep2}\f{}}{\t}}

\IRule{A3}{\GenCast\E{\ep1}{\ep3}{\C} \\ \f:\tp1 \in \C \\ \AnaCast\E{\ep2}{\ep4}{\tp1}}{\GenCast{\E}{\Set{\ep1}\f{\ep2}}{\Call{\ep3}{\xt{f!}}{\ep4}}{\tp2}}

\IRule{A4}{
	\inv{\E}{\Call{\ep1}\m{\b{\ep2}}} = \ep3, \t \\
}{
	\GenCast{\E}{\Call{\e_1}\m{\b{\e_2}}}{\ep3}{\t}
}

\IRule{A5}{
  \b{\AnaCast\E{\e_1}{\e_2}\t} \\ 
  \Class \C {\b{\Ftype\f\t}} {\b{\md}}
  }{\GenCast{\E}{\New\C{\b{\e_1}}}{\New\C{\b{\e_2}}}{\C}}
\end{mathpar}